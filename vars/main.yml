---
bin_dir: /usr/local/bin
code_server_dir: "{{ '/opt/code-server' if code_server_major == '3' else '' }}"
systemd_unit_files_dir: /usr/local/lib/systemd/system
code_server_url_prefix: https://github.com/cdr/code-server/releases/download
code_server_short_ver: "{{ code_server_ver | regex_replace('-.+', '') }}"
code_server_download_dir: "{{ code_server_short_ver if code_server_short_ver is version('2.1698', '>=') else code_server_ver }}"
code_server_major: "{{ code_server_ver.split('.')[0] }}"
code_server_arch: "{{ 'x86_64' if code_server_major != '1' else 'x64' }}"
code_server_tar_url: "{{ code_server_url_prefix }}/{{ code_server_download_dir }}/code-server{{ '-' if code_server_major == '3' else '' }}{{ code_server_ver }}-linux-{{ code_server_arch }}.tar.gz"
code_server_data_dir_abs: "{{ code_server_data_dir | expanduser }}"
